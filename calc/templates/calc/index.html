
{% load widget_tweaks %}
{% load humanize %}
{% load static %}

<!doctype html>
<html lang="en">
  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
	  
	<!-- Loader CSS -->  
	<link rel="stylesheet" type="text/css" href="{% static "calc/css/loader.css" %}">

    <title>Home Investment Calculator</title>
  </head>
  <body>
	<div class="col-x-12 overlay">
		<div class="loader"></div>
	</div>
	<div class="container">
		<br>
		<div class="row">
			<div class="col-md-10">
		<h1>Home Investment Calculator</h1>
		<p>You'll often hear certain "common sense" reasons to buy a house -- 1) "pay yourself (i.e., via your mortgage) instead of your landlord," 2) "your mortgage payment is less than your rent," and 3) "a home is a great investment." I've often found that very few people have actually run the numbers -- this calculator helps you do that. Unlike most calculators you find online, which try to tell you what you can afford or whether you should rent or buy, this calculator tells you whether or not you will be making a good investment.</p>
			</div>
		</div>
		
		<div class="row">
		<div class="col-sm-5">  
		  <div class="form-group row">
			<label for="id_price" class="col-sm-3 col-form-label">Price</label>
			<div class="col-sm-9">
			<input type="number" name="price" class="form-control" aria-expanded="false" required id="id_price" value="500000" />
			</div>
			<div class="col-sm-12">
			<div class="collapse" id="price-collapse" name="price">
			  <div class="card card-body">
				  <p>Total <strong>price</strong> of the home in dollars, <i>excluding</i> closing costs, appraisals, etc.</p>
			  </div>
			</div>
			</div>
			</div>
		
		  <div class="form-group row">
			<label for="id_down_payment" class="col-sm-5 col-form-label">Down payment %</label>
			<div class="col-sm-7">
			<input type="number" name="down_payment" min="0" max="1" step="0.01" class="form-control" required id="id_down_payment" value=".2" />		
			</div>
			<div class="col-sm-12">
			  <div class="collapse" id="price-collapse" name="down_payment">
			  <div class="card card-body">
				  <p>Down payment percent of the purchase price. Most banks require at least 20% or private mortgage insurance is triggered. A higher down payment means a lower monthly mortgage payment. However, if the appreciation of the home is greater than the interest rate, a lower down payment increases the investment returns.</p>
			  </div>
			</div>	
		  </div>
		  </div>
		
		  <div class="form-group row">
			<label for="id_interest_rate" class="col-sm-5 col-form-label">Interest rate %</label>
			<div class="col-sm-7">
			<input type="number" name="interest_rate" min="0" max="1" step="0.01" class="form-control" required id="id_interest_rate" value=".05" />			
			</div>
			<div class="col-sm-12">
			  <div class="collapse" id="price-collapse" name="interest_rate">
			  <div class="card card-body">
				  <p>Yearly mortgage interest rate. This is best thought of as the cost of 'renting' the money that you are borrowing. The higher the interest rate, the greater the loan payment each month and the lower the returns.</p>
			  </div>
			</div>	
		  </div>
		  </div>
		
		  <div class="form-group row">
			<label for="id_yearly_appreciation" class="col-sm-5 col-form-label">Yearly appreciation %</label>
			<div class="col-sm-7">
			<input type="number" name="yearly_appreciation" min="0" max="1" step="0.01" class="form-control" required id="id_yearly_appreciation" value=".05" />
			</div>
			<div class="col-sm-12">
			  <div class="collapse" id="price-collapse" name="yearly_appreciation">
			  <div class="card card-body">
				  <p>Yearly appreciation of the home value. This varies widely by market and timing.</p>
			  </div>
			</div>
		  </div>
	      </div>
		  </div>
			
		<div class="col-sm-5"> 
		
		  <div class="form-group row">
			<label for="id_alternative_rent" class="col-sm-5 col-form-label">Monthly rent</label>
			<div class="col-sm-7">
			<input type="number" name="alternative_rent" min="0" class="form-control" required id="id_alternative_rent" value="1000" />		
			</div>
			<div class="col-sm-12">
			  <div class="collapse" id="price-collapse" name="alternative_rent">
			  <div class="card card-body">
				  <p>Alternative rent is the <b>monthly</b> rent you would pay if you do not buy -- your current rent is a good proxy.</p>
			  </div>
			</div>	
		  </div>
		  </div>
	
		  <div class="form-group row">
			<label for="id_price" class="col-sm-3 col-form-label">Federal tax rate</label>
			<div class="col-sm-9">
			<select name="federal_tax_bracket" id="id_federal_tax_bracket" class="form-control" aria-expanded="false">
			  <option value=".1">10% - Income $9,525/$19,050 Single/Married</option>
			  <option value=".12">12% - Income $38,700/$77,400 Single/Married</option>
			  <option value=".22">22% - Income $82,500/$165,000 Single/Married</option>
			  <option value=".24" selected>24% - Income $157,500/$315,000 Single/Married</option>
			  <option value=".32">32% - Income $200,000/$400,000 Single/Married</option>
			  <option value=".35">35% - Income $500,000/$600,000 Single/Married</option>
			  <option value=".37">37% - Income $500,000+/$600,000+ Single/Married</option>
			</select>
			</div>
			<div class="col-sm-12">
			<div class="collapse" id="price-collapse" name="federal_tax_bracket">
			  <div class="card card-body">
				  <p>Top federal tax rate - the higher your tax rate, the bigger the benefit of the mortgage interest and property tax deductions.</p>
			  </div>
			</div>
			</div>
			</div>
			
		  <div class="form-group row">
			<label for="id_state_tax_bracket" class="col-sm-5 col-form-label">State tax rate</label>
			<div class="col-sm-7">
			<input type="number" name="state_tax_bracket" min="0" max="1" step="0.01" class="form-control" required id="id_state_tax_bracket" value=".06" />
			</div>
			<div class="col-sm-12">
			  <div class="collapse" id="price-collapse" name="state_tax_bracket">
			  <div class="card card-body">
				  <p>Top state tax rate - the higher your tax rate, the bigger the benefit of the mortgage interest tax deduction.</p>
			  </div>
			</div>
		  </div>
	      </div>
		  </div>
		</div>
			
			<div class="row">
			<div class="col-xs-12">
		  <a class="btn btn-link" data-toggle="collapse" href="#collapseExample" role="button" aria-expanded="false" aria-controls="collapseExample">
			Advanced options
		  </a>
				</div>
		</div>
			<div class="row">
			<div class="col-sm-6">
			<div class="collapse" id="collapseExample">
			  <div class="card card-body">
				 
		  <div class="form-group row">
			<label for="id_closing_cost" class="col-sm-5 col-form-label">Closing cost %</label>
			<div class="col-sm-7">
			<input type="number" name="closing_cost" min="0" max="1" step="0.01" class="form-control" required id="id_closing_cost" value=".03"/>
			</div>
			<div class="col-sm-12">
			  <div class="collapse" id="price-collapse" name="closing_cost">
			  <div class="card card-body">
				  <p>Closing costs (appraisals, loan origination fees, etc.) as a percent of the home price. This typically ranges 2-5%.</p>
			  </div>
			</div>	
		  </div>
	      </div>
				  
		  <div class="form-group row">
			<label for="id_property_tax" class="col-sm-5 col-form-label">Property tax %</label>
			<div class="col-sm-7">
			<input type="number" name="property_tax" min="0" max="1" step="0.01" class="form-control" required id="id_property_tax" value=".02"/>			
			</div>
			<div class="col-sm-12">
			  <div class="collapse" id="price-collapse" name="property_tax">
			  <div class="card card-body">
				  <p>Yearly property taxes as a percent of home price. This varies between state and municipality, but is typically 1-2% of the home value. </p>
			  </div>
			</div>
			</div>
		  </div>
		
		  <div class="form-group row">
			<label for="id_maintenance_cost" class="col-sm-5 col-form-label">Maintenance cost %</label>
			<div class="col-sm-7">
			<input type="number" name="maintenance_cost" min="0" max="1" step="0.01" class="form-control" required id="id_maintenance_cost" value=".01"/>		
			</div>
			<div class="col-sm-12">
			  <div class="collapse" id="price-collapse" name="maintenance_cost">
			  <div class="card card-body">
				  <p>Yearly maintenance costs (lawncare, plumbing, etc.) per year as a percent of the home price. This is typically at least 1% of the home value.</p>
			  </div>
			</div>	
		  </div>
		  </div>
				  
		  <div class="form-group row">
			<label for="id_realtor_cost" class="col-sm-5 col-form-label">Realtor cost %</label>
			<div class="col-sm-7">
			<input type="number" name="realtor_cost" min="0" max="1" step="0.01" class="form-control" required id="id_realtor_cost" value=".06"/>		
			</div>
			<div class="col-sm-12">
			  <div class="collapse" id="price-collapse" name="realtor_cost">
			  <div class="card card-body">
				  <p>Percent of sale price paid to the listing agents by the seller. Typically 6%.</p>
			  </div>
			</div>	
		  </div>
		  </div>

			</div>
			</div>
			</div>
		</div>
			
		<div class="row">
			<div class="col-sm-12">
	<div class="form-group row">
		<div class="col-sm-12">
		
      <button class="btn btn-info" id="calculate">
        Calculate
      </button>
		</div>
    </div>
</div>
</div>
		

<div id="takeaways" class="row" style="display:none;">
	<div class="col-sm-10 p-3 mb-2 bg-secondary text-white">

		<div class="row">
		<div class="col-sm-3">
		<p><strong>Investment returns (IRR): </strong>As a reference, the long run annualized return of the S&P500 is ~9% with reinvested dividends.</p><br>
		</div>
		<div class="col-sm-9">
		<canvas id="irrChart"></canvas>
		</div>
		</div>
		
		<div class="row">
		<div class="col-sm-3">
		<p><strong>Paying yourself: </strong>Year <span id="first_year_ppmt_greater_than_ipmt"></span> 
		is the first year when your <strong>principal payment will be larger
		than your interest payment.</strong></p>
		</div>
		<div class="col-sm-9">
		<canvas id="pmtChart"></canvas>
		</div>
		</div>
		
		<div class="row">
		<div class="col-sm-3">
		<p><strong>Saving money: </strong>Year <span id="first_year_positive_cash_flow"></span> 
		is the first year when your <strong>house's mortgage and other costs are less expensive than the equivalent rent.</strong></p>
		</div>
		<div class="col-sm-9">
		<canvas id="cashFlowChart"></canvas>
	    </div>
		</div>
</div>
</div>
		
<table class="table table-sm">
  <thead id="thead" style="display:none;">
    <tr>
      <th scope="col">Year</th>
		<th scope="col">Principal Paid</th>
		<th scope="col">Interest Paid</th>
		<th scope="col">Other Costs</th>
		<th scope="col">Avoided Rent</th>
		<th scope="col">Total Spend</th>
		<th scope="col">Home Value</th>
		<th scope="col">Debt</th>
		<th scope="col">Equity</th>
      <th scope="col">IRR % (if sold)</th>
    </tr>
  </thead>
  <tbody id="tbody" name="tbody">

  </tbody>
</table>
		
  </div>

    <!-- Optional JavaScript -->
    <!-- jQuery first, then Popper.js, then Bootstrap JS -->
    <script src="https://code.jquery.com/jquery-3.2.1.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous"></script>
	
	<script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.7.1/Chart.min.js" crossorigin="anonymous"></script>
	
	
	<script src="{% static "calc/js/form-select.js" %}"></script>
	<script src="{% static "calc/js/chart-options.js" %}"></script>
	<script src="{% static "calc/js/get-stream.js" %}"></script>
	  
  </body>
</html>